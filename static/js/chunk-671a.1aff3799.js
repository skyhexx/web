(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-671a"],{"8/b6":function(t,n,e){"use strict";var o=e("feuk");e.n(o).a},F5Uk:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[t.connectedAccount?e("div",{staticClass:"my-domains"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("app.myDomains")))]),t._v(" "),e("div",{staticClass:"total"},[t._v("("+t._s(t.domainsTotal)+")")])]),t._v(" "),e("div",{staticClass:"right"})]):t._e(),t._v(" "),t.hasDomain?e("div",[t._m(0),t._v(" "),t._l(t.domainsData,(function(n,o){return e("div",{staticClass:"domains-row"},[e("div",{staticClass:"left"},[e("div",{staticClass:"token-uri"},[t._v(t._s(n.uri))]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.tokenId,placement:"top"}},[e("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:n.tokenId,expression:"domain.tokenId",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"token-id"},[t._v(t._s(t.subTokenUri(n.tokenId))+" ")])])],1),t._v(" "),e("div",{staticClass:"right"},[e("el-dropdown",[e("span",{staticClass:"el-dropdown-link"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.manageDomain(n.uri)}}},[t._v(t._s(t.$t("app.managerDomain")))])],1),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:n.tokenId,expression:"domain.tokenId",arg:"copy"}]},[t._v(t._s(t.$t("app.copy")))])],1)],1)],1)])})),t._v(" "),e("el-pagination",{attrs:{"hide-on-single-page":!0,background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.domainBalance},on:{"current-change":t.handleCurrentChange}})],2):t._e(),t._v(" "),!t.hasDomain&&t.connectedAccount?e("div",{staticClass:"error-domains-row"},[e("span",[e("svg-icon",{attrs:{"icon-class":"information"}})],1),t._v(" "),e("span",[t._v(t._s(t.$t("app.noDomainYet")))])]):t._e(),t._v(" "),t.connectedAccount?t._e():e("div",{staticClass:"error-domains-row"},[e("span",[e("svg-icon",{attrs:{"icon-class":"information"}})],1),t._v(" "),e("span",[t._v(t._s(t.$t("app.errorNoConnect")))])])])},a=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"title-row"},[e("div",{staticClass:"left"},[e("div",{staticClass:"token-uri"},[t._v("URI")]),t._v(" "),e("div",{staticClass:"token-id"},[t._v("ID")])])])}];e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return a}))},feuk:function(t,n,e){},oSe1:function(t,n,e){"use strict";e.r(n);var o=e("F5Uk"),a=e("ppSp");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("8/b6");var s=e("KHd+"),r=Object(s.a)(a.default,o.a,o.b,!1,null,"6948c9b1",null);r.options.__file="domains.vue",n.default=r.exports},ppSp:function(t,n,e){"use strict";e.r(n);var o=e("rWN6"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n.default=a.a},rWN6:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a,i,s=u(e("14Xm")),r=u(e("D3Ub")),c=u(e("YgiN"));function u(t){return t&&t.__esModule?t:{default:t}}n.default={data:function(){return{cns:null,pageSize:10,domainsData:[],domains:[],subDomains:[],noDomain:!1,loading:null,domainBalance:0}},mounted:function(){console.log("domains");setTimeout((function(){}),1e3)},created:function(){this.cns=new c.default,this.loadDomainCount();var t=this;setTimeout((function(){t.handleCurrentChange(1)}),2e3)},computed:{hasDomain:function(){return this.domainsData.length>0},domainsTotal:function(){return this.domainsData.length},connectedAccount:function(){return this.$store.state.wallet.connectedAccount}},watch:{domainBalance:function(){this.handleCurrentChange(1)}},methods:{handleCurrentChange:function(t){var n=(t-1)*this.pageSize,e=t*this.pageSize;e>this.domainBalance&&(e=this.domainBalance),this.loadTokenURIByIndex(n,e)},loadDomainCount:(i=(0,r.default)(s.default.mark((function t(){var n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cns.balanceOf(this.connectedAccount);case 2:n=t.sent,console.log(n/1),this.domainBalance=n/1;case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),loadTokenURIByIndex:(a=(0,r.default)(s.default.mark((function t(n,e){var o,a,i,r,c,u,d;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.connectedAccount){t.next=5;break}return o=this.$t("app.error"),a=this.$t("app.errorNoConnect"),this.$notify.error({title:o,message:a,duration:2e3,position:"bottom-right"}),t.abrupt("return");case 5:return this.openLoading(),t.next=8,this.cns.tokenURIByIndexAndEnd(this.connectedAccount,n,e);case 8:if(i=t.sent,r=i.length,console.log(i),0!=r){t.next=14;break}return this.noDomain=!0,t.abrupt("return");case 14:for(new Array,c=0;c<r;c++)u={},2==(d=i[c].tokenURI.split(".")).length?(u.type=d[1].toUpperCase(),u.uri=d[0]+"."+d[1],u.tokenId=i[c].tokenId.toString(),u.isSubDomain=!1,u.parent=d[1]):3==d.length&&(u.type=d[2].toUpperCase(),u.uri=d[0]+"."+d[1]+"."+d[2],u.tokenId=i[c].tokenId.toString(),u.isSubDomain=!0,u.parent=d[1]+"."+d[2]),this.domains.push(u);this.domainsData=this.domains,this.domains=[],this.closeLoading();case 19:case"end":return t.stop()}}),t,this)}))),function(t,n){return a.apply(this,arguments)}),loadTokenURI:(o=(0,r.default)(s.default.mark((function t(){var n,e,o,a,i,r,u;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.connectedAccount){t.next=5;break}return n=this.$t("app.error"),e=this.$t("app.errorNoConnect"),this.$notify.error({title:n,message:e,duration:2e3,position:"bottom-right"}),t.abrupt("return");case 5:return this.openLoading(),new c.default,t.next=9,this.cns.allTokenURI(this.connectedAccount);case 9:if(o=t.sent,a=o.length,console.log(o),0!=a){t.next=15;break}return this.noDomain=!0,t.abrupt("return");case 15:for(new Array,i=0;i<a;i++)r={},2==(u=o[i].tokenURI.split(".")).length?(r.type=u[1].toUpperCase(),r.uri=u[0]+"."+u[1],r.tokenId=o[i].tokenId.toString(),r.isSubDomain=!1,r.parent=u[1],this.domains.push(r),this.domains.push(r),this.domains.push(r)):3==u.length&&(r.type=u[2].toUpperCase(),r.uri=u[0]+"."+u[1]+"."+u[2],r.tokenId=o[i].tokenId.toString(),r.isSubDomain=!0,r.parent=u[1]+"."+u[2],this.subDomains.push(r));this.handleCurrentChange(1),this.closeLoading();case 19:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),manageDomain:function(t){console.log(t),this.$router.push({path:"/domain/"+t})},openLoading:function(){var t=this.$t("app.loading");this.loading=this.$loading({lock:!0,text:t,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var n=this;setTimeout((function(){n.closeLoading()}),1e4)},closeLoading:function(){this.loading.close()},remove:function(t){console.log(t)},subTokenUri:function(t){return t.slice(0,10)+"..."+t.slice(-6)},doCopy:function(t){var n=this.$t("app.copySuccess");this.$copyText(t).then((function(t){this.$message({message:n,type:"success"})}),(function(t){console.log(t)}))},onCopy:function(){var t=this.$t("app.copySuccess");this.$message({message:t,type:"success"})},onSubmit:function(){this.$message("submit!")},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}}}}]);