(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-832b"],{"/Kns":function(n,t,e){"use strict";var o=e("AP3e");e.n(o).a},AP3e:function(n,t,e){},oSe1:function(n,t,e){"use strict";e.r(t);var o=e("14Xm"),s=e.n(o),a=e("D3Ub"),i=e.n(a),c=e("YgiN"),r={data:function(){return{test:"ffff",pageSize:2,domainsData:[],domains:[],subDomains:[],noDomain:!1,loading:null}},mounted:function(){console.log("domains");setTimeout(function(){},1e3)},created:function(){var n=this;setTimeout(function(){n.loadTokenURI()},1e3)},computed:{hasDomain:function(){return this.domains.length>0},domainsTotal:function(){return this.domains.length},connectedAccount:function(){return this.$store.state.wallet.connectedAccount}},methods:{handleCurrentChange:function(n){var t=(n-1)*this.pageSize,e=n*this.pageSize;e>this.domains.length&&(e=this.domains.length),this.domainsData=this.domains.slice(t,e)},loadTokenURI:function(){var n=this;return i()(s.a.mark(function t(){var e,o,a,i,r,l,d,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=n.connectedAccount){t.next=5;break}return e=n.$t("app.error"),o=n.$t("app.errorNoConnect"),n.$notify.error({title:e,message:o,duration:2e3,position:"bottom-right"}),t.abrupt("return");case 5:return n.openLoading(),a=new c.a,t.next=9,a.allTokenURI(n.connectedAccount);case 9:if(i=t.sent,r=i.length,console.log(i),0!=r){t.next=15;break}return n.noDomain=!0,t.abrupt("return");case 15:for(new Array,l=0;l<r;l++)d={},2==(u=i[l].tokenURI.split(".")).length?(d.type=u[1].toUpperCase(),d.uri=u[0]+"."+u[1],d.tokenId=i[l].tokenId.toString(),d.isSubDomain=!1,d.parent=u[1],n.domains.push(d),n.domains.push(d),n.domains.push(d)):3==u.length&&(d.type=u[2].toUpperCase(),d.uri=u[0]+"."+u[1]+"."+u[2],d.tokenId=i[l].tokenId.toString(),d.isSubDomain=!0,d.parent=u[1]+"."+u[2],n.subDomains.push(d));n.handleCurrentChange(1),n.closeLoading();case 19:case"end":return t.stop()}},t,n)}))()},manageDomain:function(n){console.log(n),this.$router.push({path:"/domain/"+n})},openLoading:function(){var n=this.$t("app.loading");this.loading=this.$loading({lock:!0,text:n,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=this;setTimeout(function(){t.closeLoading()},1e4)},closeLoading:function(){this.loading.close()},remove:function(n){console.log(n)},subTokenUri:function(n){return n.slice(0,10)+"..."+n.slice(-6)},doCopy:function(n){var t=this.$t("app.copySuccess");this.$copyText(n).then(function(n){this.$message({message:t,type:"success"})},function(n){console.log(n)})},onCopy:function(){var n=this.$t("app.copySuccess");this.$message({message:n,type:"success"})},onSubmit:function(){this.$message("submit!")},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}},l=(e("/Kns"),e("KHd+")),d=Object(l.a)(r,function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[n.connectedAccount?e("div",{staticClass:"my-domains"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[n._v(n._s(n.$t("app.myDomains")))]),n._v(" "),e("div",{staticClass:"total"},[n._v("("+n._s(n.domainsTotal)+")")])]),n._v(" "),e("div",{staticClass:"right"})]):n._e(),n._v(" "),n.hasDomain?e("div",[n._m(0),n._v(" "),n._l(n.domainsData,function(t,o){return e("div",{staticClass:"domains-row"},[e("div",{staticClass:"left"},[e("div",{staticClass:"token-uri"},[n._v(n._s(t.uri))]),n._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tokenId,placement:"top"}},[e("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tokenId,expression:"domain.tokenId",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:n.onCopy,expression:"onCopy",arg:"success"}],staticClass:"token-id"},[n._v(n._s(n.subTokenUri(t.tokenId))+" ")])])],1),n._v(" "),e("div",{staticClass:"right"},[e("el-dropdown",[e("span",{staticClass:"el-dropdown-link"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){n.manageDomain(t.uri)}}},[n._v(n._s(n.$t("app.managerDomain")))])],1),n._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tokenId,expression:"domain.tokenId",arg:"copy"}]},[n._v("复制")]),n._v(" "),e("el-dropdown-item",[e("span",{staticStyle:{display:"block"},on:{click:function(e){n.remove(t.tokenId)}}},[n._v("删除")])])],1)],1)],1)])}),n._v(" "),e("el-pagination",{attrs:{"hide-on-single-page":!0,background:"",layout:"prev, pager, next","page-size":n.pageSize,total:n.domains.length},on:{"current-change":n.handleCurrentChange}})],2):n._e(),n._v(" "),!n.hasDomain&&n.connectedAccount?e("div",{staticClass:"error-domains-row"},[e("span",[e("svg-icon",{attrs:{"icon-class":"information"}})],1),n._v(" "),e("span",[n._v(n._s(n.$t("app.noDomainYet")))])]):n._e(),n._v(" "),n.connectedAccount?n._e():e("div",{staticClass:"error-domains-row"},[e("span",[e("svg-icon",{attrs:{"icon-class":"information"}})],1),n._v(" "),e("span",[n._v(n._s(n.$t("app.errorNoConnect")))])])])},[function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"title-row"},[t("div",{staticClass:"left"},[t("div",{staticClass:"token-uri"},[this._v("URI")]),this._v(" "),t("div",{staticClass:"token-id"},[this._v("ID")])])])}],!1,null,"0f21e976",null);d.options.__file="domains.vue";t.default=d.exports}}]);